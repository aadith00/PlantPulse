{% load static %}

<!DOCTYPE html>
<html lang="en">
<!-- Basic -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Site Metas -->
    <title>PlantPulse</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Site Icons -->
    <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    <link rel="apple-touch-icon" href="{% static 'images/apple-touch-icon.png' %}">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- Site CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style> .top-search {
        margin-bottom: 20px; /* Adjust the value as needed */
    }
    
    .all-title-box {
        margin-top: 20px; /* Optional, in case you need more spacing */
    }

    .list-group-item {
        font-size: 16px; /* Adjust font size */
        line-height: 1.6; /* Increase line height for readability */
    }

    .list-group-item {
        padding: 15px 20px; /* Adjust padding for more space inside items */
        margin-bottom: 10px; /* Adds space between items */
    }
    
    .list-group-item-action {
        border-radius: 5px; /* Optional: Add rounded corners to make it look cleaner */
    }
    
    </style>

</head>

<body>
    <!-- Start Main Top -->
    <div class="main-top">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="right-phone-box">
                        <p>Call US :- <a href="#"> +91 XXX XXX XXXX</a></p>
                    </div>
                    <div class="our-link">
                        <ul>
                            <li><i class="fa fa-user s_color"></i> My Account</a></li>
                            <li><i class="fas fa-location-arrow"></i> Our location</a></li>
                            <li><a href="#"><i class="fas fa-headset"></i> Contact Us</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                    <div class="login-box">
                        <a href="{% url 'auth' %}" class="btn btn-primary">Register / Sign In</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Main Top -->

    <!-- Start Main Top -->
    <header class="main-header">
        <!-- Start Navigation -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-default bootsnav">

            <div class="container">
                <!-- Start Header Navigation -->
                <div class="navbar-header">
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu"
                        aria-controls="navbars-rs-food" aria-expanded="false" aria-label="Toggle navigation">
                        <i class="fa fa-bars"></i>
                    </button>
                    <a class="navbar-brand" href="{% url 'index' %}">
                        <img src="{% static 'images/newlogo.png' %}" class="logo" alt="">
                    </a>
                </div>
                <!-- End Header Navigation -->

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="navbar-menu">
                    <ul class="nav navbar-nav ml-auto d-flex align-items-center" data-in="fadeInDown"
                        data-out="fadeOutUp">
                        <li class="nav-item"><a class="nav-link" href="{% url 'index' %}">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'model' %}">Predict</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'about' %}">About Us</a></li>

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle"
                                href="{% if not user.is_authenticated %}{% url 'shop-detail' %}{% else %} {% url 'shop-detail' %} {% endif %}"
                                id="shopDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
                                aria-expanded="false">
                                SHOP
                            </a>
                            {% if user.is_authenticated %}
                            <ul class="dropdown-menu" aria-labelledby="shopDropdown">
                                <li><a class="dropdown-item" href="{% url 'cart' %}">Cart</a></li>
                                <li><a class="dropdown-item" href="{% url 'checkout' %}">Checkout</a></li>
                                <li><a class="dropdown-item" href="{% url 'my-account' %}">My Account</a></li>
                            </ul>
                            {% endif %}
                        </li>

                        <li class="nav-item"><a class="nav-link" href="{% url 'gallery' %}">Gallery</a></li>
                        <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">Contact Us</a></li>
                        <li class="nav-item">
                            <a href="{% url 'logout' %}" class="btn btn-primary ml-3">Logout</a>
                        </li>
                    </ul>
                </div>


        </nav>
        <!-- End Navigation -->
    </header>
    <!-- End Main Top -->

    <!-- Start Top Search -->
    <div class="top-search" style="margin-bottom: 20px;">
        <div class="container">
            <div class="input-group">
                <span class="input-group-addon"><i class="fa fa-search"></i></span>
                <input type="text" class="form-control" placeholder="Search">
                <span class="input-group-addon close-search"><i class="fa fa-times"></i></span>
            </div>
        </div>
    </div>
    <!-- End Top Search -->

    <!-- Start All Title Box -->
    <div class="all-title-box">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h2>Cart</h2>
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Shop</a></li>
                        <li class="breadcrumb-item active">Cart</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End All Title Box -->
    
    <div class="container light-style flex-grow-1 container-p-y mb-3">
        <div class="card overflow-hidden">
            <div class="row no-gutters row-bordered row-border-light">
                <div class="col-md-3 pt-0">
                    <div class="list-group list-group-flush account-settings-links">
                        <a class="list-group-item list-group-item-action active" data-toggle="list"
                            href="#account-general">General</a>
                        <a class="list-group-item list-group-item-action" data-toggle="list"
                            href="#account-address">Addresses</a>
                        <a class="list-group-item list-group-item-action" data-toggle="list"
                            href="#account-orders">Order History</a>
                            {% if is_farmer %}
                            <!-- Tab for Viewing My Products -->
                            <a class="list-group-item list-group-item-action" data-toggle="list" href="#my-products">
                                My Products
                            </a>
                            <!-- Tab for Uploading Products -->
                            <a class="list-group-item list-group-item-action" data-toggle="list" href="#upload-product">
                                Upload Product
                            </a>
                        {% endif %}
                        
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="tab-content">
                        <!-- General Information and Profile Picture -->
                        <div class="tab-pane fade active show" id="account-general">
                            <div class="card-body">
                                <h4>Account Information</h4>
                                <hr>
                                <div class="d-flex align-items-center mb-3">
                                    <img {% if customer.profile_picture %} src="{{ customer.profile_picture.url }}" {% endif %} alt="Profile Picture" class="rounded-circle"
                                        style="width: 80px; height: 80px; border: 2px solid #6c757d;">
                                    <form action="{% url 'update_profile_picture' %}" method="post" enctype="multipart/form-data" class="ml-3">
                                        {% csrf_token %}
                                        <label class="btn btn-outline-primary" style="cursor: pointer;">
                                            Upload new photo
                                            <input type="file" name="profile_picture" style="display: none;" onchange="this.form.submit()" required>
                                        </label>
                                    </form>
                                </div>
                                <hr>
                                <div class="form-group">
                                    <label class="form-label">Username</label>
                                    <input type="text" class="form-control" value="{{ customer.user.username }}" readonly>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email</label>
                                    <input type="text" class="form-control" value="{{ customer.user.email }}" readonly>
                                </div>
                                <form action="{% url 'update_general_info' %}" method="post">
                                    {% csrf_token %}
                                    <div class="form-group">
                                        <label class="form-label">First Name</label>
                                        <input type="text" class="form-control" name="first_name" value="{{ customer.first_name }}">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Last Name</label>
                                        <input type="text" class="form-control" name="last_name" value="{{ customer.last_name }}">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Phone Number</label>
                                        <input type="text" class="form-control" name="phone_number" value="{{ customer.phone_number }}">
                                    </div>
                                    <button type="submit" class="btn btn-primary mt-3">Save Changes</button>
                                </form>
                            </div>
                        </div>
    
                        <!-- Address Section -->
                        <div class="tab-pane fade" id="account-address">
                            <div class="card-body">
                                <h4>Shipping and Billing Address</h4>
                                <hr>
                                <form action="{% url 'update_address' %}" method="post">
                                    {% csrf_token %}
                                    <div class="form-group">
                                        <label class="form-label">Address Line 1</label>
                                        <input type="text" class="form-control" name="address" value="{{ customer.address }}">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Address Line 2</label>
                                        <input type="text" class="form-control" name="address2" value="{{ customer.address2 }}">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">City</label>
                                        <input type="text" class="form-control" name="city" value="{{ customer.city }}">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">State</label>
                                        <input type="text" class="form-control" name="state" value="{{ customer.state }}">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Country</label>
                                        <input type="text" class="form-control" name="country" value="{{ customer.country }}">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Zip Code</label>
                                        <input type="text" class="form-control" name="zip_code" value="{{ customer.zip_code }}">
                                    </div>
                                    <button type="submit" class="btn btn-primary mt-3">Save Address</button>
                                </form>
                            </div>
                        </div>
    
                        <!-- Order History and Tracking Section -->
                        <div class="tab-pane fade" id="account-orders">
                            <div class="card-body">
                                <h4>Order History</h4>
                                <hr>
                                <div class="row">
                                    {% if orders %}
                                    {% for order in orders %}
                                    <div class="col-md-4 mb-4">
                                        <div class="card">
                                            <div class="card-header bg-info text-white">
                                                <h5 class="mb-0">Order ID: {{ order.order_id }}</h5>
                                            </div>
                                            <div class="card-body">
                                                <p><strong>Status:</strong> <span class="badge badge-info">{{ order.status }}</span></p>
                                                <p><strong>Total Price:</strong> Rs. {{ order.total_price }}</p>
                                                <p><strong>Placed on:</strong> {{ order.created_at|date:"M d, Y" }}</p>
                                                
                                                <!-- Add Review button as a link -->
                                                <a href="{% url 'review' order.order_id %}" class="btn btn-primary mt-3">Add Review</a>
                                            </div>
                                        </div>                                        
                                        {% endfor %}
                                    {% else %}
                                        <p>No orders placed yet.</p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>

                        {% if is_farmer %}
                        <!-- My Products Section -->
                        <div class="tab-pane fade" id="my-products">
                            <div class="card-body">
                                <h4>My Products</h4>
                                <hr>
                                {% if customer_products %}
                                <div class="row">
                                    {% for product in customer_products %}
                                    <div class="col-md-4 mb-4">
                                        <div class="card">
                                            <div class="card-header bg-success text-white">
                                                <h5 class="mb-0">{{ product.title }}</h5>
                                            </div>
                                            <div class="card-body">
                                                <p><strong>Description:</strong> {{ product.description }}</p>
                                                <p><strong>Price:</strong> Rs. {{ product.price }}</p>
                                                <p><strong>Stock:</strong> {{ product.stock_count }} available</p>
                                                <p><strong>Shelf Life:</strong> {{ product.life }} days</p>
                                                <p><strong>Manufactured On:</strong> {{ product.mfg_date|date:"M d, Y"
                                                    }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                                {% else %}
                                <p>You have not uploaded any products yet.</p>
                                {% endif %}
                            </div>
                        </div>

                        <div class="tab-pane fade" id="upload-product">
                            <div class="card-body">
                                <h4>Upload a New Product</h4>
                                <hr>
                                <form action="{% url 'upload_product' %}" method="post" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <div class="form-group">
                                        <label class="form-label">Product Name</label>
                                        <input type="text" class="form-control" name="title" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Description</label>
                                        <textarea class="form-control" name="description"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Price</label>
                                        <input type="number" class="form-control" name="price" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="stock_count">Stock Count</label>
                                        <input type="number" class="form-control" name="stock_count" id="stock_count"
                                            placeholder="Enter stock count">
                                    </div>
                                    <div class="form-group">
                                        <label for="life">Shelf Life (days)</label>
                                        <input type="number" class="form-control" name="life" id="life"
                                            placeholder="Enter shelf life in days">
                                    </div>
                                    <div class="form-group">
                                        <label for="mfg_date">Manufacturing Date</label>
                                        <input type="date" class="form-control" name="mfg_date" id="mfg_date">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Product Image</label>
                                        <input type="file" class="form-control" name="image">
                                    </div>
                                    <button type="submit" class="btn btn-primary mt-3">Upload Product</button>
                                </form>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- Start Footer  -->
    <footer>
        <div class="footer-main">
            <div class="container">
                <hr>
                <div class="row">
                    <div class="col-lg-4 col-md-12 col-sm-12">
                        <div class="footer-widget">
                            <h4>About PlantPulse</h4>
                            <p>PlantPulse offers a fresh, convenient marketplace where you can buy and sell quality
                                tomatoes directly from trusted sources. Our platform connects farmers and buyers,
                                ensuring access to fresh produce while supporting sustainable agriculture. Shopping for
                                tomatoes with PlantPulse is quick, easy, and helps foster a healthier farming community.
                            </p>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-12 col-sm-12">
                        <div class="footer-link-contact">
                            <h4>Contact Us</h4>
                            <ul>
                                <li>
                                    <p><i class="fas fa-map-marker-alt"></i>Address: PlantPulse Technologies <br> Office
                                        No. 12, 4th Floor <br>Tech Park One, Yerawada,<br>Pune, Maharashtra - 411006,
                                        India </p>
                                </li>
                                <li>
                                    <p><i class="fas fa-phone-square"></i>Phone: <a href="tel:+1-888705770"> +91-98765
                                            43210</a></p>
                                </li>
                                <li>
                                    <p><i class="fas fa-envelope"></i>Email: <a
                                            href="mailto:contactinfo@gmail.com">support@plantpulse.in</a></p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer  -->


    <!-- Start copyright  -->
    <div class="footer-copyright">
        <p class="footer-company">All Rights Reserved. &copy; 2018 <a href="#">ThewayShop</a> Design By :
            <a href="https://html.design/">html design</a>
        </p>
    </div>
    <!-- End copyright  -->

    <a href="#" id="back-to-top" title="Back to top" style="display: none;">&uarr;</a>

    <!-- ALL JS FILES -->
    <script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <!-- ALL PLUGINS -->
    <script src="{% static 'js/jquery.superslides.min.js' %}"></script>
    <script src="{% static 'js/bootstrap-select.js' %}"></script>
    <script src="{% static 'js/inewsticker.js' %}"></script>
    <script src="{% static 'js/bootsnav.js.' %}"></script>
    <script src="{% static 'js/images-loded.min.js' %}"></script>
    <script src="{% static 'js/isotope.min.js' %}"></script>
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <script src="{% static 'js/baguetteBox.min.js' %}"></script>
    <script src="{% static 'js/form-validator.min.js' %}"></script>
    <script src="{% static 'js/contact-form-script.js' %}"></script>
    <script src="{% static 'js/custom.js' %}"></script>
</body>

</html>
